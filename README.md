# 自定义 Markdown 语法说明

本项目基于 VitePress 构建，扩展了一些自定义的 Markdown 语法，用于增强文档的展示效果。

## 目录

- [图片画廊 (:::images)](#图片画廊-images)
- [时间线 (:::timeline)](#时间线-timeline)
- [折叠详情块 (:::details)](#折叠详情块-details)

---

## 图片画廊 (:::images)

用于展示多张图片，支持点击查看大图，并根据图片数量自动调整布局。

### 语法

```markdown
:::images
![图片描述1](/path/to/image1.png)
![图片描述2](/path/to/image2.png)
![图片描述3](/path/to/image3.png)
:::
```

### 特性

- **自动布局**：根据图片数量自动调整每张图片的宽度
  - 1 张图片：100% 宽度
  - 2 张图片：每张 48% 宽度
  - 3 张图片：每张 32% 宽度
  - 4 张图片：每张 48% 宽度（2x2 布局）
  - 5 张及以上：每张 32% 宽度（多行布局）

- **点击查看大图**：点击任意图片可在全屏查看器中查看，支持：
  - 键盘导航：`←` / `→` 切换图片，`ESC` 关闭
  - 鼠标点击：点击左右箭头按钮切换图片
  - 响应式设计：移动端自动适配

- **响应式设计**：在移动端自动调整为单列布局

### 示例

```markdown
:::images
![Web 界面截图 1](/posts/2025-04/web_01.png)
![Web 界面截图 2](/posts/2025-04/web_02.png)
![Web 界面截图 3](/posts/2025-04/web_03.png)
![Web 界面截图 4](/posts/2025-04/web_04.png)
:::
```

### 注意事项

- 图片路径支持相对路径和绝对路径
- 图片描述（alt 文本）会在查看器中显示
- 图片会自动添加圆角和阴影效果

---

## 时间线 (:::timeline)

用于展示时间线事件，适合记录问题排查过程、操作步骤等时间序列信息。

### 语法

```markdown
:::timeline
- **时间戳** 事件描述
- **时间戳** 事件描述
- **时间戳** 事件描述
:::
```

### 特性

- **时间戳高亮**：使用 `**粗体**` 标记的时间戳会以品牌色显示
- **时间线样式**：自动添加时间线连接和标记点
- **响应式设计**：移动端自动优化显示

### 示例

```markdown
:::timeline
- **2025-04-09 18:16:35** 业务报演出票务后台访问异常、无法访问
- **2025-04-09 18:19:56** 通过 CI/CD 平台发现 xx.xxx.98.69 这台机器异常，请求全部 500 应用无响应
- **2025-04-09 18:22:34** 通过 CI/CD 平台将 xx.xxx.98.69 这台异常机器剔除负载后应用访问正常
:::
```

### 注意事项

- 时间戳必须使用 `**粗体**` 标记
- 每个列表项会自动添加时间线标记点
- 最后一个项目不会显示连接线

---

## 折叠详情块 (:::details)

用于创建可折叠的内容块，适合放置长代码、详细说明等需要隐藏的内容。

> **注意**：这是 VitePress 内置的语法，无需额外配置即可使用。

### 语法

```markdown
:::details 标题
这里是折叠的内容
可以是多行
支持 Markdown 语法
:::
```

### 特性

- **可折叠**：点击标题可展开/折叠内容
- **支持 Markdown**：内容区域支持所有 Markdown 语法
- **代码友好**：适合放置长代码块

### 示例

```markdown
:::details 查看完整线程信息
```
Threads Total: 496, NEW: 0, RUNNABLE: 39, BLOCKED: 0, WAITING: 408
ID      NAME                                         STATE
178     http-nio-8868-exec-1                         WAITING
179     http-nio-8868-exec-2                         WAITING
...
```
:::
```

---

## 技术实现

### 图片画廊

- **Markdown 解析**：使用 `markdown-it-container` 插件注册 `images` 容器
- **样式处理**：通过 CSS 和 JavaScript 动态调整图片布局
- **查看器**：使用 Vue 组件 `ImageViewer` 实现全屏图片查看

### 时间线

- **Markdown 解析**：使用 `markdown-it-container` 插件注册 `timeline` 容器
- **样式处理**：通过 CSS 实现时间线视觉效果
- **解析逻辑**：自动识别列表项中的粗体时间戳

### 相关文件

- 配置文件：`.vitepress/config.mts` - Markdown 容器注册
- 主题文件：`.vitepress/theme/index.ts` - Vue 组件注册
- 样式文件：`.vitepress/theme/style.css` - 自定义样式
- 客户端脚本：`.vitepress/theme/client.ts` - 交互逻辑

---

## 使用建议

1. **图片画廊**：适合展示多个相关的截图、示意图等
2. **时间线**：适合记录问题排查过程、操作步骤、事件序列等
3. **折叠详情块**：适合放置长代码、详细日志、补充说明等

---

## 更新日志

- 初始版本：支持 `:::images` 和 `:::timeline` 语法
